
# 44 个预定义场景
SCENE_LIST = [
    "地图导航",
    "打车服务",
    "即时通信聊天服务",
    "电话通话",
    "网络社区",
    "网络支付",
    "网上购物",
    "餐饮外卖",
    "邮寄服务",
    "交通票务",
    "婚恋相亲",
    "求职招聘",
    "网络借贷",
    "房屋租售",
    "汽车交易",
    "医疗健康",
    "旅游服务",
    "酒店预定",
    "网络游戏",
    "学习教育",
    "维修装修",
    "女性健康",
    "汽车单车租赁",
    "投资理财",
    "手机银行",
    "网络邮箱",
    "远程会议",
    "网络直播",
    "在线影音",
    "新闻资讯",
    "运动健身",
    "浏览器",
    "杀毒软件",
    "电子图书",
    "拍摄美化",
    "应用商店",
    "天气",
    "日历",
    "实用工具",
    "文件管理",
    "娱乐票务",
    "用户登录",
    "其他",
    "广告",
    "个人信息"
]

# 识别场景的 Prompt（注意 JSON 大括号全部转义）
SCENE_PROMPT = """
你是一名专业的安卓权限合规与功能理解专家，你的任务是根据给定的一段 UI 交互链，判断它属于哪一种应用功能场景。

【已知场景列表（共 44 类）】
{SCENE_LIST}

这些场景的大致含义示例（仅用于帮助你理解，分类时仍必须从上面 44 个名称中选择）：
- 地图导航：地图展示、位置搜索、路线规划、导航等
- 打车服务：网约车/出租车叫车、出行下单、行程与司机信息
- 即时通信聊天服务：聊天列表、对话窗口、发送文字/语音/表情等
- 电话通话：拨号盘、通话记录、来电/去电界面、网络电话
- 网络社区：论坛、帖子流、评论区、关注/点赞/转发等
- 网络支付：收付款、转账、充值提现、支付记录
- 网上购物：商品列表、商品详情、加入购物车、下单、订单页
- 餐饮外卖：餐厅列表、菜品选择、外卖下单、配送信息
- 交通票务：机票/火车票/车票/出行行程的搜索、预订、改签
- 求职招聘：职位列表、职位详情、简历投递、简历管理
- 网络借贷 / 投资理财 / 手机银行：账户信息、资产展示、交易记录、申购/赎回等金融操作
- 房屋租售 / 汽车交易：房源/车源列表与详情、发布与管理
- 旅游服务 / 酒店预定：景点/路线/酒店搜索与预订
- 网络游戏：游戏大厅、匹配、对局界面、道具购买等
- 学习教育：课程列表、课程详情、在线课堂、题目练习
- 网络直播 / 在线影音：直播间、弹幕、礼物打赏、视频/音频播放页面
- 浏览器：地址栏、搜索框、网页内容显示
- 拍摄美化：相机取景、滤镜、美颜、扫码、相册编辑
- 文件管理：文件/图片/视频/下载内容的浏览、管理、分享
- 用户登录：注册、登录、验证码输入、账号密码输入等
- 广告：明显推广文案、跳转按钮、非主要功能的插入广告
- 其他：无法可靠归入上述任何一类，或功能极不明确的页面

【输入说明】
你将收到一个由多帧 UI 组成的交互链，每一帧包含：
- [TEXT]：该帧页面 OCR 识别出的主要文字
- [WIDGETS]：该帧中重要控件（按钮、标题、菜单项等）的文本

这些帧按时间顺序排列，通常包含：
1. 权限弹窗弹出之前的界面（before）
2. 权限弹窗本身（granting，可能为 1～多帧）
3. 用户授权/拒绝后的界面（after）

请综合整段交互链来判断功能场景，不要只看单一按钮文案。

【输出要求】
1. 从 44 个场景中选出你认为**最匹配**的 1 个场景，作为 "top1"。
2. 再给出一个 "top3" 场景候选列表，要求：
   - "top3" **必须包含 3 个互不相同的场景名称**；
   - 这 3 个场景都必须来自上面给出的 44 个场景名称；
   - "top1" 必须也出现在 "top3" 中，且是 "top3" 的第一个元素；
   - 即使你非常确定只有 1～2 个场景合理，也仍然要补足到 3 个，用“次优但有一定相关性”的场景填满。
3. 不能输出列表外的新场景名称，也不能输出“未知/不确定”等词语。

【必须严格遵守的 JSON 输出格式】（不得包含任何额外文本）：
{{
  "top1": "场景名称",
  "top3": ["场景1", "场景2", "场景3"]
}}

现在是待分析的 UI 特征：
{FEATURE}
"""



# ===========================
# 本地 LLM 配置
# ===========================
VLLM_URL = "http://localhost:8001/v1/chat/completions"
MODEL_NAME = "Qwen2.5-7B"

# ===========================
# 超参（可调）
# ===========================
MAX_STEPS = 6       # before + granting + after 保留的最大步骤
MAX_WIDGETS = 10     # 每个界面最多取多少 widgets
MAX_TEXT_LEN = 400   # 每段文本最大长度
MAX_TOTAL_LEN = 3000 # 最终输入给 LLM 的最大字符数（安全上限）